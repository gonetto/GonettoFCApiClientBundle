services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    Gonetto\FCApiClientBundle\Service\ApiClient:
        class:      Gonetto\FCApiClientBundle\Service\ApiClient
        arguments:
            - '%gonetto_fc_api_client.api_path%'
            - '@eight_points_guzzle.client.finance_consult'
        public: true

    Gonetto\FCApiClientBundle\Service\CustomerClient:
        class:      Gonetto\FCApiClientBundle\Service\CustomerClient
        arguments:
            - '%gonetto_fc_api_client.api_access_token%'
            - '@Gonetto\FCApiClientBundle\Service\ApiClient'
            - '@JMS\Serializer\Serializer'
        public: true

    Gonetto\FCApiClientBundle\Model\DataRequest:
        class: Gonetto\FCApiClientBundle\Model\DataRequest
        factory: 'Gonetto\FCApiClientBundle\Service\DataRequestFactory:createResponse'
        shard: false
        arguments: ['%gonetto_fc_api_client.api_access_token%']

    Gonetto\FCApiClientBundle\Model\FileRequest:
        class: Gonetto\FCApiClientBundle\Model\FileRequest
        factory: 'Gonetto\FCApiClientBundle\Service\FileRequestFactory:createResponse'
        shard: false
        arguments: ['%gonetto_fc_api_client.api_access_token%']

    JMS\Serializer\Serializer:
        class: JMS\Serializer\Serializer
        factory: 'Gonetto\FCApiClientBundle\Service\JmsSerializerFactory:createSerializer'

    Gonetto\FCApiClientBundle\Service\DataClient:
        class:      Gonetto\FCApiClientBundle\Service\DataClient
        arguments:
            - '@Gonetto\FCApiClientBundle\Service\ApiClient'
            - '@Gonetto\FCApiClientBundle\Model\DataRequest'
            - '@Gonetto\FCApiClientBundle\Model\FileRequest'
            - '@JMS\Serializer\Serializer'
        public: true
